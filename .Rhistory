design_rand <- cbc_design(
profiles = profiles_restricted,
method = 'random',
n_resp = 4000, # Number of respondents
n_alts = 3, # Number of alternatives per question
n_q = 6, # Number of questions per respondent
no_choice = TRUE,
priors = priors_fixed_parameter,
balance_by = 'powertrain'
)
# Chunk 1: setup
#| label: setup
#| include: false
knitr::opts_chunk$set(
warning = FALSE,
message = FALSE,
fig.path = "figs/",
fig.width = 7.252,
fig.height = 4,
comment = "#>",
fig.retina = 3
)
library(tidyverse)
library(cbcTools)
library(logitr)
library(here)
# Chunk 2
profiles <- cbc_profiles(
powertrain = c('gas', 'bev', 'phev', 'hev'),
price = seq(0.8, 1.1, 0.1),
range_bev = c(0, seq(50, 250, 25)),
range_phev = c(0, seq(10, 40, 10)),
mileage = seq(20000, 60000, 5000),
make_year = seq(2015, 2023),
operating_cost = seq(3, 21, 3)
)
# Chunk 3
profiles_restricted <- cbc_restrict(
profiles,
# BEV range restrictions
(powertrain == "gas") & (range_bev != 0),
(powertrain == "hev") & (range_bev != 0),
(powertrain == "phev") & (range_bev != 0),
(powertrain == "bev") & (range_bev == 0),
# PHEV range restrictions
(powertrain == "gas") & (range_phev != 0),
(powertrain == "hev") & (range_phev != 0),
(powertrain == "bev") & (range_phev != 0),
(powertrain == "phev") & (range_phev == 0),
# Gas efficiency restrictions
(powertrain == "gas") & (operating_cost < 9),
(powertrain != "gas") & (operating_cost >= 18)
)
priors_fixed_parameter <- cbc_priors(
profiles = profiles_restricted,
# powertrain: categorical (effects coded or dummy)
powertrain = c("bev" = -1.0, "phev" = -0.0,  "hev" = 0.5),
price = -0.2,
range_bev = 0.5,
range_phev = 0.6,
mileage = -0.5,
make_year = -0.2,
operating_cost = -0.3
# no_choice = 0.5
)
# priors_fixed_parameter
# Chunk 1: setup
#| label: setup
#| include: false
knitr::opts_chunk$set(
warning = FALSE,
message = FALSE,
fig.path = "figs/",
fig.width = 7.252,
fig.height = 4,
comment = "#>",
fig.retina = 3
)
library(tidyverse)
library(cbcTools)
library(logitr)
library(here)
# Chunk 2
profiles <- cbc_profiles(
powertrain = c('gas', 'bev', 'phev', 'hev'),
price = seq(0.8, 1.1, 0.1),
range_bev = c(0, seq(50, 250, 25)),
range_phev = c(0, seq(10, 40, 10)),
mileage = seq(20000, 60000, 5000),
make_year = seq(2015, 2023),
operating_cost = seq(3, 21, 3)
)
# Chunk 3
profiles_restricted <- cbc_restrict(
profiles,
# BEV range restrictions
(powertrain == "gas") & (range_bev != 0),
(powertrain == "hev") & (range_bev != 0),
(powertrain == "phev") & (range_bev != 0),
(powertrain == "bev") & (range_bev == 0),
# PHEV range restrictions
(powertrain == "gas") & (range_phev != 0),
(powertrain == "hev") & (range_phev != 0),
(powertrain == "bev") & (range_phev != 0),
(powertrain == "phev") & (range_phev == 0),
# Gas efficiency restrictions
(powertrain == "gas") & (operating_cost < 9),
(powertrain != "gas") & (operating_cost >= 18)
)
# Chunk 4
priors_fixed_parameter <- cbc_priors(
profiles = profiles_restricted,
# powertrain: categorical (effects coded or dummy)
powertrain = c("bev" = -1.0, "phev" = -0.0,  "hev" = 0.5),
price = -0.2,
range_bev = 0.5,
range_phev = 0.6,
mileage = -0.5,
make_year = -0.2,
operating_cost = -0.3
# no_choice = 0.5
)
# priors_fixed_parameter
design_rand <- cbc_design(
profiles = profiles_restricted,
method = 'random',
n_resp = 4000, # Number of respondents
n_alts = 3, # Number of alternatives per question
n_q = 6, # Number of questions per respondent
# no_choice = TRUE,
priors = priors_fixed_parameter
# balance_by = 'powertrain'
)
cbc_inspect(design_rand)
design_rand <- cbc_design(
profiles = profiles_restricted,
method = 'random',
n_resp = 4000, # Number of respondents
n_alts = 3, # Number of alternatives per question
n_q = 6, # Number of questions per respondent
# no_choice = TRUE,
priors = priors_fixed_parameter
# balance_by = 'powertrain'
) |>
cbc_decode()
cbc_inspect(design_rand)
design_rand <- cbc_design(
profiles = profiles_restricted,
method = 'random',
n_resp = 4000, # Number of respondents
n_alts = 3, # Number of alternatives per question
n_q = 6, # Number of questions per respondent
# no_choice = TRUE,
priors = priors_fixed_parameter,
balance_by = 'powertrain'
) |>
cbc_decode()
cbc_inspect(design_rand)
profiles_restricted
# Chunk 1: setup
#| label: setup
#| include: false
knitr::opts_chunk$set(
warning = FALSE,
message = FALSE,
fig.path = "figs/",
fig.width = 7.252,
fig.height = 4,
comment = "#>",
fig.retina = 3
)
library(tidyverse)
library(cbcTools)
library(logitr)
library(here)
# Chunk 2
profiles <- cbc_profiles(
powertrain = c('gas', 'bev', 'phev', 'hev'),
price = seq(0.8, 1.1, 0.1),
range_bev = c(0, seq(50, 250, 25)),
range_phev = c(0, seq(10, 40, 10)),
mileage = seq(20000, 60000, 5000),
make_year = seq(2015, 2023),
operating_cost = seq(3, 21, 3)
)
# Chunk 3
profiles_restricted <- cbc_restrict(
profiles,
# BEV range restrictions
(powertrain == "gas") & (range_bev != 0),
(powertrain == "hev") & (range_bev != 0),
(powertrain == "phev") & (range_bev != 0),
(powertrain == "bev") & (range_bev == 0),
# PHEV range restrictions
(powertrain == "gas") & (range_phev != 0),
(powertrain == "hev") & (range_phev != 0),
(powertrain == "bev") & (range_phev != 0),
(powertrain == "phev") & (range_phev == 0),
# Gas efficiency restrictions
(powertrain == "gas") & (operating_cost < 9),
(powertrain != "gas") & (operating_cost >= 18)
)
# Chunk 4
priors_fixed_parameter <- cbc_priors(
profiles = profiles_restricted,
# powertrain: categorical (effects coded or dummy)
powertrain = c("bev" = -1.0, "phev" = -0.0,  "hev" = 0.5),
price = -0.2,
range_bev = 0.5,
range_phev = 0.6,
mileage = -0.5,
make_year = -0.2,
operating_cost = -0.3,
no_choice = 0.5
)
# priors_fixed_parameter
# Chunk 5
design_rand <- cbc_design(
profiles = profiles_restricted,
method = 'random',
n_resp = 4000, # Number of respondents
n_alts = 3, # Number of alternatives per question
n_q = 6, # Number of questions per respondent
no_choice = TRUE,
priors = priors_fixed_parameter,
balance_by = 'powertrain'
# remove_dominant = TRUE
)
cbc_inspect(design_rand)
design_rand
# Chunk 1: setup
#| label: setup
#| include: false
knitr::opts_chunk$set(
warning = FALSE,
message = FALSE,
fig.path = "figs/",
fig.width = 7.252,
fig.height = 4,
comment = "#>",
fig.retina = 3
)
library(tidyverse)
library(cbcTools)
library(logitr)
library(here)
# Chunk 2
profiles <- cbc_profiles(
powertrain = c('gas', 'bev', 'phev', 'hev'),
price = seq(0.8, 1.1, 0.1),
range_bev = c(0, seq(50, 250, 25)),
range_phev = c(0, seq(10, 40, 10)),
mileage = seq(20000, 60000, 5000),
make_year = seq(2015, 2023),
operating_cost = seq(3, 21, 3)
)
# Chunk 3
profiles_restricted <- cbc_restrict(
profiles,
# BEV range restrictions
(powertrain == "gas") & (range_bev != 0),
(powertrain == "hev") & (range_bev != 0),
(powertrain == "phev") & (range_bev != 0),
(powertrain == "bev") & (range_bev == 0),
# PHEV range restrictions
(powertrain == "gas") & (range_phev != 0),
(powertrain == "hev") & (range_phev != 0),
(powertrain == "bev") & (range_phev != 0),
(powertrain == "phev") & (range_phev == 0),
# Gas efficiency restrictions
(powertrain == "gas") & (operating_cost < 9),
(powertrain != "gas") & (operating_cost >= 18)
)
# Chunk 4
priors_fixed_parameter <- cbc_priors(
profiles = profiles_restricted,
# powertrain: categorical (effects coded or dummy)
powertrain = c("bev" = -1.0, "phev" = -0.0,  "hev" = 0.5),
price = -0.2,
range_bev = 0.5,
range_phev = 0.6,
mileage = -0.5,
make_year = -0.2,
operating_cost = -0.3,
no_choice = 0.5
)
# priors_fixed_parameter
# Chunk 5
design_rand <- cbc_design(
profiles = profiles_restricted,
method = 'random',
n_resp = 4000, # Number of respondents
n_alts = 3, # Number of alternatives per question
n_q = 6, # Number of questions per respondent
no_choice = TRUE,
priors = priors_fixed_parameter,
balance_by = 'powertrain'
# remove_dominant = TRUE
)
# Chunk 6
cbc_inspect(design_rand)
design_rand %>%
tibble() %>%
select(starts_with('power'), no_choice) %>%
janitor::clean_names() %>%
count(
powertrainbev,
powertrainphev,
powertrainhev,
no_choice
)
table(design_rand$powertrainbev)
table(design_rand$powertrainphev)
table(design_rand$powertrainhev)
table(design_rand$price)
table(design_rand$range)
table(design_rand$operating_cost)
#choices <- cbc_choices(design_rand)
choices_priors <- cbc_choices(design_rand, priors_fixed_parameter)
seq(3, 21, 1)
seq(3, 21, 2)
c(0, seq(50, 250, 25))
c(0, seq(50, 250, 50))
c(0, seq(50, 280, 30))
seq(3, 21, 2)
seq(3, 22, 2)
seq(3, 21, 2)
profiles <- cbc_profiles(
powertrain = c('gas', 'bev', 'phev', 'hev'),
price = seq(0.8, 1.1, 0.1),
range_bev = c(0, seq(50, 250, 50)),
range_phev = c(0, seq(10, 40, 10)),
mileage = seq(20000, 60000, 5000),
make_year = seq(2015, 2023),
operating_cost = seq(3, 21, 2)
)
profiles_restricted <- cbc_restrict(
profiles,
# BEV range restrictions
(powertrain == "gas") & (range_bev != 0),
(powertrain == "hev") & (range_bev != 0),
(powertrain == "phev") & (range_bev != 0),
(powertrain == "bev") & (range_bev == 0),
# PHEV range restrictions
(powertrain == "gas") & (range_phev != 0),
(powertrain == "hev") & (range_phev != 0),
(powertrain == "bev") & (range_phev != 0),
(powertrain == "phev") & (range_phev == 0),
# Gas efficiency restrictions
(powertrain == "gas") & (operating_cost < 9),
(powertrain != "gas") & (operating_cost >= 18)
)
profiles_restricted
# Chunk 1: setup
#| label: setup
#| include: false
knitr::opts_chunk$set(
warning = FALSE,
message = FALSE,
fig.path = "figs/",
fig.width = 7.252,
fig.height = 4,
comment = "#>",
fig.retina = 3
)
library(tidyverse)
library(cbcTools)
library(logitr)
library(here)
# Chunk 2
profiles <- cbc_profiles(
powertrain = c('gas', 'bev', 'phev', 'hev'),
price = seq(0.8, 1.1, 0.1),
range_bev = c(0, seq(50, 250, 50)),
range_phev = c(0, seq(10, 40, 10)),
mileage = seq(20000, 60000, 5000),
make_year = seq(2015, 2023),
operating_cost = seq(3, 21, 2)
)
# Chunk 3
profiles_restricted <- cbc_restrict(
profiles,
# BEV range restrictions
(powertrain == "gas") & (range_bev != 0),
(powertrain == "hev") & (range_bev != 0),
(powertrain == "phev") & (range_bev != 0),
(powertrain == "bev") & (range_bev == 0),
# PHEV range restrictions
(powertrain == "gas") & (range_phev != 0),
(powertrain == "hev") & (range_phev != 0),
(powertrain == "bev") & (range_phev != 0),
(powertrain == "phev") & (range_phev == 0),
# Gas efficiency restrictions
(powertrain == "gas") & (operating_cost < 9),
(powertrain != "gas") & (operating_cost >= 18)
)
# Chunk 4
priors_fixed_parameter <- cbc_priors(
profiles = profiles_restricted,
# powertrain: categorical (effects coded or dummy)
powertrain = c("bev" = -1.0, "phev" = -0.0,  "hev" = 0.5),
price = -0.2,
range_bev = 0.5,
range_phev = 0.6,
mileage = -0.5,
make_year = -0.2,
operating_cost = -0.3,
no_choice = 0.5
)
# priors_fixed_parameter
design_rand <- cbc_design(
profiles = profiles_restricted,
method = 'random',
n_resp = 1000, # Number of respondents
n_alts = 3, # Number of alternatives per question
n_q = 6, # Number of questions per respondent
no_choice = TRUE,
priors = priors_fixed_parameter,
balance_by = c('powertrain', 'operating_cost')
# remove_dominant = TRUE
)
cbc_inspect(design_rand)
# Chunk 1: setup
#| label: setup
#| include: false
knitr::opts_chunk$set(
warning = FALSE,
message = FALSE,
fig.path = "figs/",
fig.width = 7.252,
fig.height = 4,
comment = "#>",
fig.retina = 3
)
library(tidyverse)
library(cbcTools)
library(logitr)
library(here)
# Chunk 2
profiles <- cbc_profiles(
powertrain = c('gas', 'bev', 'phev', 'hev'),
price = seq(0.8, 1.1, 0.1),
range_bev = c(0, seq(50, 250, 50)),
range_phev = c(0, seq(10, 40, 10)),
mileage = seq(20000, 60000, 5000),
make_year = seq(2015, 2023),
operating_cost = seq(3, 21, 2)
)
# Chunk 3
profiles_restricted <- cbc_restrict(
profiles,
# BEV range restrictions
(powertrain == "gas") & (range_bev != 0),
(powertrain == "hev") & (range_bev != 0),
(powertrain == "phev") & (range_bev != 0),
(powertrain == "bev") & (range_bev == 0),
# PHEV range restrictions
(powertrain == "gas") & (range_phev != 0),
(powertrain == "hev") & (range_phev != 0),
(powertrain == "bev") & (range_phev != 0),
(powertrain == "phev") & (range_phev == 0),
# Gas efficiency restrictions
(powertrain == "gas") & (operating_cost < 9),
(powertrain != "gas") & (operating_cost >= 18)
)
# Chunk 4
priors_fixed_parameter <- cbc_priors(
profiles = profiles_restricted,
# powertrain: categorical (effects coded or dummy)
powertrain = c("bev" = -1.0, "phev" = -0.0,  "hev" = 0.5),
price = -0.2,
range_bev = 0.5,
range_phev = 0.6,
mileage = -0.5,
make_year = -0.2,
operating_cost = -0.3,
no_choice = 0.5
)
# priors_fixed_parameter
# Chunk 5
design_rand <- cbc_design(
profiles = profiles_restricted,
method = 'random',
n_resp = 1000, # Number of respondents
n_alts = 3, # Number of alternatives per question
n_q = 6, # Number of questions per respondent
no_choice = TRUE,
priors = priors_fixed_parameter,
balance_by = c('operating_cost', 'powertrain')
# remove_dominant = TRUE
)
cbc_inspect(design_rand)
profiles_restricted
library(dplyr)
design_rand
design_rand %>%
tibble() %>%
count(
powertrainbev,
powertrainphev,
powertrainhev,
operating_cost
)
design_rand %>%
tibble() %>%
count(
powertrainbev,
powertrainphev,
powertrainhev,
operating_cost
) %>% View()
seq(3, 21, 2)
