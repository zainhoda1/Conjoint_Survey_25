---
echo: false
warning: false
css: css/survey_theme.css
---

```{r}
library(surveydown)
library(tidyverse)
library(here)
library(kableExtra)
library(glue)
```



::: {#filter .sd-page}

## This study is about the purchase of your next vehicle.

```{r}


sd_question(
  type  = 'mc',
  id    = 'next_veh_market',
  label = "**Are you interested in buying a new or used vehicle?**",
  option = c(
    "New vehicle only" = "new",
    "Used vehicle only"  = "used",
    "I’m looking at both markets" = "both"
  )
)

sd_question(
  type  = 'mc',
  id    = 'next_veh_style',
  label = "**Which vehicle body style would you consider for your next vehicle?**",
  option = c(
    "Car / sedan / hatchback" = "Car / sedan / hatchback",
    "SUV / crossover" = "SUV / crossover",
    "Minivan / van" = "van",
    "Truck" = "truck",
    "Other" = "other"
  )
)

sd_question(
  type  = 'mc',
  id    = 'next_veh_budget',
  label = '**What is your budget for the vehicle?**',
  option = c(
    "$4,999 or less" = "5000",
    "$5,000 - $9,999" = "10000",
    "$10,000 - $14,999" = "15000",
    "$15,000 - $19,999" = "20000",
    "$20,000 - $24,999" = "25000",
    "$25,000 - $29,999" = "30000",
    "$30,000 - $34,999" = "35000",
    "$35,000 - $39,999" = "40000",
    "$40,000 - $44,999" = "45000",
    "$45,000 - $49,999" = "50000",
    "$50,000 or more"= "55000"
  )
)


```


```{r}
sd_next()
```


:::




::: {#next_veh_style_car .sd-page}

```{r}

# Car image options
car_images <- sample(c("1_new_car_sedan_compact",
                       "2_new_car_hatchback_subcompact",
                       "3_new_car_sedan_subcompact",
                       "4_new_car_sedan_fullsize",
                       "5_new_car_sedan_fullsize_luxury",
                       "6_new_car_hatchback_compact",
                       "7_new_car_hatchback_compact_luxury",
                       "8_new_car_sedan_midsize",
                       "9_new_car_hatchback_subcompact_luxury"))


  #Choosing Car/SUV type
all_cars <- car_images

car_src <- glue::glue(
  '<img src="images/car-images/{all_cars}.png" class="responsive-image" style="max-width: 200px; height: auto; object-fit: contain;">'
 )

names(all_cars) <- car_src

# Define first choice question
sd_question(
    type  = 'mc_buttons',
    id    = 'next_veh_car_images',
    label = "**Select a vehicle based on its segment / style that is most closely aligned with the next vehicle you are considering purchasing.**",
    option = all_cars
)
  
```


```{r}
sd_next()
```

:::

::: {#next_veh_style_suv .sd-page}

```{r}

# Car image options
suv_images <- sample(c("1_new_crossover_compact",
                       "2_new_crossover_midsize",
                       "3_new_suv_fullsize",
                       "4_new_crossover_midsize",
                       "5_new_suv_fullsize",
                       "6_new_crossover_subcompact",
                       "7_new_crossover_subcompact",
                       "8_new_suv_fullsize",
                       "9_new_crossover_compact"))

  #Choosing Car/SUV type

all_suv <- suv_images

suv_src <- glue::glue(
  '<img src="images/car-images/{all_suv}.png" class="responsive-image" style="max-width: 200px; height: auto; object-fit: contain;">'
)

names(all_suv) <- suv_src
  

sd_question(
    type  = 'mc_buttons',
    id    = 'next_veh_suv_images',
    label = "**Select a vehicle based on its segment / style that is most closely aligned with the next vehicle you are considering purchasing.**",
    option = all_suv
)


```


```{r}
sd_next()
```

:::



::: {#cbc_demo .sd-page}

```{r}
vehicle_cbc0_options<- c(
  "Option 1" = "option_1",
  "Option 2" = "option_2",
  "Option 3" = "option_3"
)

vehicle_cbc_options <- c(
  "Option 1" = "option_1",
  "Option 2" = "option_2",
  "Option 3" = "option_3"
)
```

## Choice Question Demonstration

We will now begin the choice tasks. We will show you **six** choice questions, starting on the next page. Below is an example of the type of questions you will be asked.


```{r}
sd_output("make_table_short")

sd_output("vehicle_cbc_q0_button", type = "question")

sd_next()
```

:::





::: {#vehicle_pageQ1_button .sd-page}
### Question 1 of 6
```{r}
sd_output("make_table_short")

sd_output("vehicle_cbc_q1_button", type = "question")

sd_next()
```


:::



::: {#vehicle_pageQ2_button .sd-page}
### Question 2 of 6
```{r}
sd_output("make_table_short")

sd_output("vehicle_cbc_q2_button", type = "question")

sd_next()
```
:::

::: {#vehicle_pageQ3_button .sd-page}
### Question 3 of 6
```{r}
sd_output("make_table_short")

sd_output("vehicle_cbc_q3_button", type = "question")

sd_next()
```
:::



::: {#battery_cbc_demo .sd-page}

## Choice Question Demonstration

We will now show you **six** choice questions, starting on the next page. **For all choice questions, please assume the used vehicle was built in 2022 and is currently three years old.**

Below is an example of the type of questions you will be asked.


```{r}
sd_output("make_table_short")

sd_output("battery_cbc_q0_button", type = "question")

sd_next()
```
:::

::: {#battery_pageQ1_button .sd-page}

<!-- <center> -->
<!-- ## Section 4 of 6 -->
</center>
### Question 1 of 6
```{r}

sd_output("make_table_short")

sd_output("battery_cbc_q1_button", type = "question")

sd_next()
```
:::

::: {#battery_pageQ2_button .sd-page}
<!-- <center> -->
<!-- ## Section 4 of 6 -->
</center>
### Question 2 of 6
```{r}
sd_output("make_table_short")

sd_output("battery_cbc_q2_button", type = "question")

sd_next()
```
:::

::: {#battery_pageQ3_button .sd-page}
<!-- <center> -->
<!-- ## Section 4 of 6 -->
</center>
### Question 3 of 6
```{r}
sd_output("make_table_short")

sd_output("battery_cbc_q3_button", type = "question")

sd_next()
```
:::

::: {#battery_pageQ4_button .sd-page}
<!-- <center> -->
<!-- ## Section 4 of 6 -->
</center>
### Question 4 of 6
```{r}
sd_output("make_table_short")

sd_output("battery_cbc_q4_button", type = "question")

sd_next()
```
:::

::: {#battery_pageQ5_button .sd-page}
<!-- <center> -->
<!-- ## Section 4 of 6 -->
</center>
### Question 5 of 6
```{r}
sd_output("make_table_short")

sd_output("battery_cbc_q5_button", type = "question")

sd_next()
```
:::

::: {#battery_pageQ6_button .sd-page}
<!-- <center> -->
<!-- ## Section 4 of 6 -->
</center>
### Question 6 of 6
```{r}
sd_output("make_table_short")

sd_output("battery_cbc_q6_button", type = "question")

sd_next()
```
:::

::: {#page2a .sd-page}


```{r}


sd_question(
  type  = "textarea",
  id    = "no_bev_selected0",
  label = "We noticed you did not choose any of the electric vehicle options in the last few questions. Could you tell us any reasons why?"
)

sd_next()
```

:::



::: {#battery_attribute_rank .sd-page}
<!-- <center> -->
<!-- ## Section 4 of 6 -->
</center>
```{r}
sd_question(
  type  = 'matrix',
  id    = 'battery_attribute',
  label = "**How important are the following attributes to you when selecting a used battery electric vehicle?**",
  row = c(
    "Vehicle mileage" = "veh_mile",
    "Purchase price"     = "purchase_price",
    "Battery refurbishment history"    = "battery_refurbish",
    "Battery range and health"          = "battery_health"
  ),
  option = c(
    "Unimportant" = "unimportant",
    "Of little importance" = "little_important",
    "Moderately important" = "moderately_important",
    "Important" = "important",
    "Very important" = "very_important"

  )
)

sd_next()
```
:::

::: {#ev_knowledge .sd-page}
<center>
## Section 5 of 6
</center>

## We'd like to learn more about your views on vehicle technologies and related topics.

```{r}

sd_question(
  type  = 'mc_multiple',
  id    = 'run_on_gasoline',
  label = "**Please select which vehicle(s) can run on gasoline.** *Select all that apply.*",
  option = c(
    "Gas hybrid electric vehicle" = "hev",
    "Plug-in hybrid electric vehicle"  = "phev",
    "Battery electric vehicle"    = "bev",
    "I’m not sure"   = "not_sure"
  )
)

sd_question(
  type  = 'mc_multiple',
  id    = 'plugged_in',
  label = "**Please select which vehicles can be plugged in.** *Select all that apply.*",
  option = c(
    "Gas hybrid electric vehicle" = "hev",
    "Plug-in hybrid electric vehicle"  = "phev",
    "Battery electric vehicle"    = "bev",
    "I’m not sure"   = "not_sure"
  )
)

# Conditional Question
sd_question(
  type  = 'mc',
  id    = 'know_electric_vehicle',
  label = "**Can you name the make and model of at least one vehicle powered completely by electricity (a battery electric vehicle)?**",
  option = c(
    "Yes" = "yes",
    "No"  = "no"
  )
)

# Target Question
sd_question(
  type  = "text",
  id    = "write_electric_name",
  label = "**Please name the make and model of the vehicle.**"
)


sd_question(
  type  = 'mc',
  id    = 'max_subsidy',
  label = "**To the best of your knowledge, what is the maximum federal tax credit currently available in the US for purchasing a new electric vehicle?**",
  option = c(
    "$1,000" = "1000",
    "$2,500"  = "2500",
    "$5,000" = "5000",
    "$7,500"  = "7500",
    "$10,000" = "10000",
    "I'm not sure"  = "not_sure"
  )
)


```



```{r}
sd_next()
```

:::

::: {#attitudes_page1 .sd-page}

```{r}
sd_question(
  type  = 'matrix',
  id    = 'attitudes_1_a',
  label = "**Please indicate the extent to which you agree or disagree with the following statements.**",
  row = c(
    "People who are important to me think that I should buy an EV."     = "ev_norm",
    "Driving an EV would eventually result in cost savings."    = "ev_cost",
    "Driving an EV would be beneficial to the environment in the long term."          = "ev_environment"
  ),
  option = c(
    "Strongly disagree" = "strongly_disagree",
    "Somewhat disagree"  = "somewhat_disagree",
    "Neither agree nor disagree"  = "neutral",
    "Somewhat agree"  = "somewhat_agree",
    "Strongly agree"  = "strongly_agree"
  )
)

sd_question(
  type  = 'matrix',
  id    = 'attitudes_1_b',
  label = " ",
  row = c(
    "If I owned a BEV, I would often worry about running out of charge." =  "ev_range",
    "BEVs are less valuable than gasoline cars on the resale market, because the technology is always advancing." =  "ev_resale",
    "The price of an EV is too high." =  "ev_price"
  ),
  option = c(
    "Strongly disagree" = "strongly_disagree",
    "Somewhat disagree"  = "somewhat_disagree",
    "Neither agree nor disagree"  = "neutral",
    "Somewhat agree"  = "somewhat_agree",
    "Strongly agree"  = "strongly_agree"
  )
)
```


```{r}
sd_next()
```
:::

::: {#attitudes_page2 .sd-page}
```{r}
sd_question(
  type  = 'matrix',
  id    = 'attitudes_2_a',
  label = "**Please indicate the extent to which you agree or disagree with the following statements.**",
  row = c(
    "Purchasing refurbished EV batteries will minimize negative effects on natural ecosystems." =  "ev_battery_environment",
    "Refurbished EV batteries do NOT perform and function as original EV batteries." =  "ev_battery_function",
    "Please select \"Strongly agree\" as your response to this item." =  "attention_check_agree"
  ),
  option = c(
    "Strongly disagree" = "strongly_disagree",
    "Somewhat disagree"  = "somewhat_disagree",
    "Neither agree nor disagree"  = "neutral",
    "Somewhat agree"  = "somewhat_agree",
    "Strongly agree"  = "strongly_agree"
  )
)

sd_question(
  type  = 'matrix',
  id    = 'attitudes_2_b',
  label = " ",
  row = c(
    "Generally, I am willing to put in extra effort to find lower prices." =  "price_sensitive",
    "I like to be among the first people to have the latest technology." =  "tech_savvy",
    "I am a person who is fully prepared to take risks." =  "risk_taker"
  ),
  option = c(
    "Strongly disagree" = "strongly_disagree",
    "Somewhat disagree"  = "somewhat_disagree",
    "Neither agree nor disagree"  = "neutral",
    "Somewhat agree"  = "somewhat_agree",
    "Strongly agree"  = "strongly_agree"
  )
)
```


```{r}
sd_next()
```

:::

::: {#individual_attribute .sd-page}
<center>
## Section 6 of 6
</center>
## Demographic information

**We're almost done! We’d like to ask a few final questions about you, which will be used only for analyzing the survey data.**

```{r}
#code block

years <- seq(2007, 1930)
names(years) <- as.character(years)

sd_question(
  type  = 'select',
  id    = 'birth_year',
  label = "**What is your year of birth?**",
  option = years
)

sd_question(
  type   = 'mc',
  id     = 'gender',
  label  = "**What is your gender?**",
  option = c(
    "Female" = "female",
    "Male"  = "male",
    "Non-binary"  = "non_binary",
    "Transgender"  = "transgender",
    "Gender Nonconforming"  = "nonconforming",
    "Other"   = "other",
    "Prefer not to answer"  = "prefer_not_answer"
  )
)

sd_question(
  type   = 'mc',
  id     = 'ethnicity',
  label  = "**Are you of Hispanic, Latino or Spanish origin?**",
  option = c(
    "Yes" = "yes",
    "No"  = "no"
  )
)

sd_question(
  type  = 'mc_multiple',
  id    = 'race',
  label = "**Which race best describes you?** *Select all that apply.*",
  option = c(
    "American Indian or Alaskan Native" = "native_american",
    "Asian"     = "asian",
    "Black or African American"    = "african_american",
    "Middle Eastern and North African (MENA)"     = "mena",
    "Native Hawaiian or other Pacific Islander"  = "pacific_islander",
    "White"   = "white",
    "Some other race"        = "other",
    "Do not know / prefer not to answer"     = "do_not_know"
  )
)


sd_question(
  type   = 'mc',
  id     = 'hh_size',
  label  = "**Including yourself, how many people live in your household?**",
  option = c(
    "1" = "1",
    "2"  = "2",
    "3" = "3",
    "4"  = "4",
    "5" = "5",
    "More than 5"  = "more_than_5"
  )
)

sd_question(
  type   = 'mc_multiple',
  id     = 'employment',
  label  = "**Which of the following describes your current employment status?** *Select all that apply.*",
  option = c(
    "I am a part-time or full-time student" = "student",
    "Employed, working fewer than 40 hours per week"  = "part_time",
    "Employed, working 40 or more hours per week" = "full_time",
    "Not employed, looking for work"  = "looking_for_work",
    "Not employed, NOT looking for work" = "not_looking_for_work",
    "Retired"  = "retired",
    "Disabled, not able to work"  = "disabled",
    "Prefer not to answer"  = "prefer_not_answer"
  )
)


sd_question(
  type   = 'mc',
  id     = 'hh_income',
  label  = "**What is your annual household income?** *Please provide your best estimate.*",
  option = c(
    "$9,999 or less" = "5000",
    "$10,000 - $19,999" = "15000",
    "$20,000 - $29,999"  = "25000",
    "$30,000 - $39,999" = "35000",
    "$40,000 - $49,999"  = "45000",
    "$50,000 - $59,999" = "55000",
    "$60,000 - $69,999"  = "65000",
    "$70,000 - $79,999"  = "75000",
    "$80,000 - $89,999"  = "85000",
    "$90,000 - $99,999"  = "95000",
    "$100,000 - $109,999"  = "105000",
    "$110,000 - $119,999"  = "115000",
    "$120,000 - $129,999"  = "125000",
    "$130,000 - $139,999" = "135000",
    "$140,000 - $149,999" = "145000",
    "$150,000 - $159,999"  = "155000",
    "$160,000 - $169,999"  = "165000",
    "$170,000 - $179,999"  = "175000",
    "$180,000 - $189,999" = "185000",
    "$190,000 - $199,999" = "195000",
    "$200,000 - $209,999" = "205000",
    "$210,000 - $219,999" = "215000",
    "$220,000 - $229,999"  = "225000",
    "$230,000 - $239,999" = "235000",
    "$240,000 - $249,999"  = "245000",
    "$250,000 or more"  = "255000",
    "Prefer not to answer"  = "prefer_not_answer"
  )
)


sd_question(
  type   = 'mc',
  id     = 'education',
  label  = "**What is the highest level of education you have completed?**  *If currently enrolled, please use the highest degree received.*",
  option = c(
    "Less than a high school diploma" = "below_high_school",
    "High school degree or equivalent (e.g. GED)"  = "high_school",
    "Some college - but less than two years" = "college_less",
    "Some college - two years or more/A.A. degree"  = "college_more",
    "Technical or trade school" = "technical",
    "College graduate/bachelor's degree/B.A./B.S."  = "bachelor",
    "Postgraduate courses"  = "postgraduate",
    "Master's degree"  = "master",
    "M.B.A. or law degree"  = "mba",
    "Ph.D. or M.D"  = "phd",
    "Prefer not to answer"  = "prefer_not_answer"
  )
)


sd_question(
  type   = 'mc',
  id     = 'housing_type',
  label  = "**What type of housing do you currently live in?**",
  option = c(
    "Single family house not attached to any other house" = "sf_detached ",
    "Single family house attached to one or more houses (townhouse, rowhome, condo, duplex, triplex, etc.)"  = "sf_attached",
    "Building with 2-4 apartments/condos/studios"  = "apart_2",
    "Building with 5-19 apartments/condos/studios" = "apart_5",
    "Building with 20 or more apartments/condos/studios"  = "apart_20",
    "A mobile home or trailer" = "mobile_home",
    "Boat, RV, van, etc."  = "boat",
    "Other"  = "other"
  )
)

sd_question(
  type   = 'mc',
  id     = 'housing_tenure',
  label  = "**Do you own or rent the current place you are living in?**",
  option = c(
    "Own" = "own",
    "Rent"  = "rent",
    "Other" = "other",
    "Do not know / prefer not to answer"  = "do_not_know"
  )
)

sd_question(
  type   = 'mc',
  id     = 'electric_bill',
  label  = "**What is your monthly electricity bill on average?** *Please provide your best estimate.*",
  option = c(
    "$0 - $99" = "50",
    "$100 - $199" = "150",
    "$200 - $299" = "250",
    "$300 - $399" = "350",
    "$400 - $499" = "450",
    "$500 or more" = "550"
  )
)


sd_question(
  type   = 'mc',
  id     = 'political_view',
  label  = "**How would you describe your political views?**",
  option = c(
    "Very conservative" = "very_conservative",
    "Conservative" = "conservative",
    "Moderate" = "moderate",
    "Liberal" = "liberal",
    "Very liberal" = "very_liberal",
    "Other" = "other",
    "Prefer not to answer" = "prefer_not_answer"
  )
)

sd_question(
  type   = 'mc',
  id     = 'party_voting',
  label  = "**Which political party do you typically vote for?**",
  option = c(
    "Democratic" = "democratic",
    "Republican" = "republican",
    "I am independent" = "independent",
    "Prefer not to answer" = "prefer_not_answer"
  )
)

sd_question(
  type   = 'mc',
  id     = 'climate_change',
  label  = "**How much do you, personally, worry about the issue of global climate change?**",
  option = c(
    "None at all" = "not_at_all",
    "A little" = "a_little",
    "A moderate amount" = "moderate", 
    "A lot" = "a_lot",
    "A great deal" =  "great_deal"
  )
)

sd_question(
  type  = "numeric",
  id    = "home_zipcode",
  label = "**What is the zip code of your primary residence?** *Please provide a 5-digit number.*"
)

sd_question(
  type  = 'textarea',
  id    = 'attention_check_survey_content',
  label = "**Please briefly describe what this survey is about:**"
)

```

```{r}
sd_next(next_page = 'end')
```
:::

::: {#end .sd-page}

## You have reached the end of this survey. We appreciate your time and participation!

```{r}
sd_output("redirect_complete")
```

:::

::: {#screenout .sd-page}

## Sorry, but you are not qualified to continue with the survey. We appreciate your time and participation!

```{r}
sd_output("redirect_screenout")
```

:::
